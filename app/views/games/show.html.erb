<% provide(:title, 'My Games') %>
<%= render "/games/shared/game_header"%>
<%= render "/games/shared/menu_bar" %>

<div class="container">
  <div class="row">
    <div class="col-md-offset-1 col-md-9 game-content">

        <% if signed_in? || (@game.user_id.nil? && @game.business_id.present?) %>
        <h4 class="lead"> Information</h4>
          <div class="card">
            <div class="content">
              <p class="lead game-description"><%= @game.description %></p>
            </div>
          </div>
          
        <% end %>


        <h4 class="lead">Venue and Time</h4>
        <div class="card">
          <div class="content">
           <div class="row card-venue-content">
                <% if @game.reservation.nil? %>
                  <div class="row venue-buttons">
                    <div class="col-md-4 col-md-offset-1 col-sm-6 col-xs-12">
                      There is no venue and date planned yet.
                    </div>
                    <div class="col-md-6 col-sm-6 col-xs-12"><%= render partial: 'reservations/new_reservation' %></div>
                  </div>
                  
                <% else %>
                  <div class="col-md-offset-1 col-md-3">
                    <div class="icon"><i class="fa fa-map-marker"></i></div>
                    <address>
                      <strong>Location </strong><br>
                      <%= @game.reservation.business.name %><br>
                     <%= @game.reservation.business.address %><br>
                      <%= @game.reservation.business.city %>, <%= @game.reservation.business.state %> 
                      <%= @game.reservation.business.zipcode %>
                  </address>
                      <% if !@game.reservation.nil? && @game.user == current_user %>
                       <div class="cancel-res">
                               <%= link_to "Cancel Reservation", @game.reservation, method: :delete,
                                data: { confirm: "Are you sure you want to delete this reservation?" },
                                title: @game.reservation, class: "btn" %>
                       </div>
                    <% end %>
                  </div>

                  <div class="col-md-8">
                    <div class="  col-md-3 col-sm-4 col-xs-6">
                      <div class="icon"><i class="fa fa-info-circle"></i></div>
                      <strong>Reservation</strong><br>
                      <%= @game.reservation.id %>
                      
                    </div>
                    <div class="col-md-4 col-sm-4 col-xs-6">
                        <div class="icon"><i class="fa fa-soccer-ball-o"></i></div>
                        <strong>Field</strong><br>
                        <%= get_field(@game.reservation.field_id).name %>

                    </div>
                    <div class="col-md-4 col-sm-4">
                      <div class="icon"><i class="fa fa-users"></i></div>
                       <strong>Type of Field</strong><br>
                        <%= get_field(@game.reservation.field_id).number_players %> players
                    </div> 

                    <div class=" col-md-5 col-sm-6 col-xs-6 date-time">
                      <div class="icon"><i class="fa fa-calendar"></i></div>
                     <strong>Date</strong><br>
                     <%= @game.reservation.date %>
                    </div>
                    <div class="col-md-5 col-sm-6 col-xs-6 date-time">
                       <div class="icon"><i class="fa fa-clock-o"></i></div>
                       <strong>Time</strong><br>
                        <%= @game.reservation.time.strftime("%I:%M %p") %> - <%= @game.reservation.end_time.strftime("%I:%M %p") %> 
                    </div>
                    
                  </div>
                <% end %>  

            </div>
          </div><!-- end content -->
        </div><!-- end card -->

        <h4 class="lead">Game Settings</h4>
        <div class="card">
          <div class="content">

          <div class="row card-info-content">
            
            <div class="col-sm-4 col-xs-4 info info-invites"><div class="icon"><i class="fa fa-plus"></i></div><div class="description"><span class="title"> Invites</span><br><span class="value"> <%= get_invites_real_string(@game.invite_allowed) %> </span></div></div>

            <div class="col-sm-4 col-xs-4 info"><div class="icon"><i class="fa fa-user"></i></div><div class="description"><span class="title"> Admin</span><br><span class="value"> <%= link_to get_game_creator(@game), get_game_creator(@game) %> </span></div></div>
            

            <div class="col-sm-4 col-xs-4 info"><div class="icon"><i class="fa fa-calendar"></i></div><div class="description"><span class="title"> Created</span><br><span class="value"> <%= @game.created_at.strftime("%b/%d") %> </span></div></div>


            <div class="col-sm-4 col-xs-4 info"><div class="icon"><i class="fa fa-users"></i></div><div class="description"><span class="title"> Players Desired</span><br><span class="value"> <%= @game.number_players %> </span></div></div>

            <div class="col-sm-4 col-xs-4 info"><div class="icon"><i class="fa fa-eye"></i></div><div class="description"><span class="title"> View</span><br><span class="value"> <%= @game.public %> </span></div></div>

            <div class="col-sm-4 col-xs-4 info"><div class="icon"><i class="fa fa-clock-o"></i></div><div class="description"><span class="title"> Last Updated</span><br><span class="value"> <%= @game.updated_at.strftime("%b/%d") %> </span></div></div>

          </div>   

          </div>
        </div><!-- End of card-->

        
    </div><!-- col-8 main content-->

  </div><!-- row -->
</div><!-- container -->



