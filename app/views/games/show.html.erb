<% provide(:title, 'My Games') %>
<%= render "/games/shared/game_header"%>
<%= render "/games/shared/menu_bar" %>

<div class="container">
  <div class="row">
    <div class="col-md-offset-1 col-md-9 game-content">

        <% if signed_in? || (@game.user_id.nil? && @game.business_id.present?) %>
          <p class="lead game-description"><%= @game.description %></p>
        <% end %>

        <strong class="lead"><i class="fa fa-info-circle"></i> Information</strong>
        <div class="card">
          <div class="content">

          <div class="row card-info-content">
            
            <div class="col-sm-4 col-xs-4 info"><div class="icon"><i class="fa fa-plus"></i></div><div class="description"><span class="title"> Invites</span><span class="value"> <%= @game.invite_allowed %> </span></div></div>

            <div class="col-sm-4 col-xs-4 info"><div class="icon"><i class="fa fa-eye"></i></div><div class="description"><span class="title"> View</span><span class="value"> <%= @game.public %> </span></div></div>

            <div class="col-sm-4 col-xs-4 info"><div class="icon"><i class="fa fa-user"></i></div><div class="description"><span class="title"> Admin</span><span class="value"> <%= link_to get_game_creator(@game), get_game_creator(@game) %> </span></div></div>

            <div class="col-sm-4 col-xs-4 info"><div class="icon"><i class="fa fa-users"></i></div><div class="description"><span class="title"> Players Desired</span><span class="value"> <%= @game.number_players %> </span></div></div>

            <div class="col-sm-4 col-xs-4 info"><div class="icon"><i class="fa fa-calendar"></i></div><div class="description"><span class="title"> Created</span><span class="value"> <%= @game.created_at.strftime("%b/%d") %> </span></div></div>

            <div class="col-sm-4 col-xs-4 info"><div class="icon"><i class="fa fa-clock-o"></i></div><div class="description"><span class="title"> Last Updated</span><span class="value"> <%= @game.updated_at.strftime("%b/%d") %> </span></div></div>

          </div>   

          </div>
        </div>

        <div class="panel panel-default">
          <div class="panel-heading">
           <h3 class="panel-title lead"><i class="fa fa-map-marker"></i> Where <i class="fa fa-calendar"></i> When</h3>
          </div>
          <div class="panel-body">
           
            <div class="">
              <% if @game.reservation.nil? %>
                <%= render partial: 'reservations/new_reservation' %>
              <% else %>
                <div style="float:left; margin-right:80px;">
                  <address>
                    <strong><i class="fa fa-map-marker"></i> <%= @game.reservation.business.name %></strong><br>
                   <%= @game.reservation.business.address %><br>
                    <%= @game.reservation.business.city %>, <%= @game.reservation.business.state %> <%= @game.reservation.business.zipcode %>
                    <br>
                    <i class="fa fa-phone"></i> <%= @game.reservation.business.phone %> 
                </address>
                </div>

                <div style="">
                  <%= @game.reservation.id %>
                  <strong><i class="fa fa-soccer-ball-o"></i> <%= get_field(@game.reservation.field_id).name %></strong><br>
                  <i class="fa fa-users"></i> <%= get_field(@game.reservation.field_id).number_players %> Players Field<br>
                  <strong><i class="fa fa-calendar"></i> <%= @game.reservation.date %></strong><br>
                  <i class="fa fa-clock-o"></i> <%= @game.reservation.time.strftime("%I:%M %p") %> - <%= @game.reservation.end_time.strftime("%I:%M %p") %> 
                </div>
                
              <% end %>  
             </div>
          </div>
          <% if !@game.reservation.nil? && @game.user == current_user %>
            <div class="panel-footer">
               <i class="fa fa-times"></i><%= link_to "Cancel Reservation", @game.reservation, method: :delete,
                     data: { confirm: "Are you sure you want to delete this reservation?" },
                     title: @game.reservation %>
            </div>
            <% end %>
        </div>
    </div><!-- col-8 main content-->

  </div><!-- row -->
</div><!-- container -->



